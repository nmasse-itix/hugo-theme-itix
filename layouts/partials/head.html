<head>
<title>{{.Title}}</title>
<meta charset="utf-8">

{{ if .IsHome -}}
<meta name="description" content="{{ .Site.Params.description }}">
{{- else -}}
<meta name="description" content="{{ .Params.description }}">
{{- end }}

<!-- Tell IE to use the Edge engine -->
<meta name="X-UA-Compatible" content="IE=edge">

<!--
  -- The viewport is the user's visible area of a web page.
  -- The viewport varies with the device, and will be smaller on a mobile phone
  -- than on a computer screen.
  --
  -- This meta tag let web designers take control over the viewport.
  --
  -- The width property controls the size of the viewport. It can be set to
  -- the special value device-width, which is the width of the screen in CSS
  -- pixels at a scale of 100%.
  --
  -- The initial-scale=1.0 part sets the initial zoom level when the page
  -- is first loaded by the browser.
  -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

{{ template "_internal/opengraph.html" . }}
{{ template "_internal/twitter_cards.html" . }}

<!-- The chroma syntax highlighter needs a separate CSS that can be generated using "hugo gen chromastyles --style=your-style > static/css/chroma.css" -->
<link rel="stylesheet" href="/css/chroma.css">
<link rel="stylesheet" href="/css/itix.css">

{{- if .Params.enableMathJax -}}
  {{- partial "mathjax.html" . -}}
{{- end -}}

<!-- Deal with the case of english articles published in the french site -->
{{- partial "lang-detection.html" . -}}
{{- if .IsTranslated -}}
{{- range .Translations -}}
{{- if .Scratch.Get "en_article_in_fr_site" -}}
<!--
  -- It's an english article published in the french site
  -- Tell Google not to index it and link to the original article.
  -->
<link rel="canonical" href="{{ .Permalink }}">
<meta name="robots" content="noindex">
{{ else }}
<!-- Otherwise, just link to the available translations, if any. -->
<link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" title="{{ .Language.LanguageName }}">
{{ end -}}
{{- end -}}
{{- end -}}

<!--
  -- Structured Data can be tested using the Google Search Console.
  -- https://search.google.com/test/rich-results
  -->
{{- if .IsHome }}
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "{{ .Site.Title | safeJS }}",
    "url": "{{ .Site.BaseURL }}",
    "description": "{{ .Site.Params.subtitle }}",
    "license": "Copyright {{ .Site.Home.Date.Year }} {{ .Site.Title }}"
}
</script>
{{ else if .IsPage -}}
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "articleSection": "{{ .Section }}",
    "name": "{{ .Title }}",
    "headline": "{{ .Title }}",
    "description": "{{ if .Description }}{{ .Description }}{{ else }}{{ if .IsPage }}{{ .Summary | plainify | htmlUnescape }}{{ end }}{{ end }}",
{{- if and (eq .Lang "fr") (.Scratch.Get "en_article_in_fr_site") }}
    "inLanguage": "en",
{{- else }}
    "inLanguage": "{{ .Language.Lang }}",
{{- end }}
    "isFamilyFriendly": "true",
    "mainEntityOfPage": {
        "@type": "WebPage",
{{- if .Scratch.Get "en_article_in_fr_site" -}}
{{- range first 1 .Translations }}
        "@id": "{{ .Permalink }}"
{{- end -}}
{{- else }}
        "@id": "{{ .Permalink }}"
{{- end }}
    },
    "author" : {
        "@type": "Person",
        "name": "{{ .Site.Title }}"
    },
    "creator" : {
        "@type": "Person",
        "name": "{{ .Site.Title }}"
    },
    "accountablePerson" : {
        "@type": "Person",
        "name": "{{ .Site.Title }}"
    },
    "copyrightHolder" : "{{ .Site.Title }}",
    "copyrightYear" : "{{ .Site.Home.Date.Year }}",
    "dateCreated": "{{ .Date.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
    "datePublished": "{{ .PublishDate.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
    "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05.00Z" | safeHTML }}",
    "publisher":{
        "@type": "Person",
        "name": "{{ .Site.Title }}",
        "url": "{{ .Site.BaseURL }}"
    },
    "url" : "{{ .Permalink }}",
    "wordCount" : "{{ .WordCount }}"
}
</script>
{{ end -}}

</head>
